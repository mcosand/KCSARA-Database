<md-card-content ng-hide="list.list.length || list.loading">No {{::eventType}} History</md-card-content>
<md-card-content ng-if="list.list.length || list.loading">
  <div layout="row" class="filter-row" layout-align="end center">
   
    <label>Year:</label>
    <md-select ng-model="list.showYear" class="md-accent" aria-label="Show year" ng-change="list.getYear()">
      <md-option ng-if="list.years.length > 1" ng-value="'all'" class="md-accent">Show All</md-option>
      <md-option ng-repeat="y in list.years" ng-value="y" class="md-accent">{{::y}}</md-option>
    </md-select>
  </div>
  <md-table-container hide-xs>
    <table md-table sortable-columns md-progress="list.loading">
      <thead md-head md-order="list.query.order">
        <tr md-row>
          <th md-column md-order-by="event.stateNumber">{{::eventType}} #</th>
          <th md-column md-order-by="event.start">Date</th>
          <th md-column md-order-by="event.name">Title</th>
          <th ng-if="list.showPersons" md-column md-order-by="persons">Participants</th>
          <th md-column md-numeric md-order-by="hours">Hours</th>
          <th ng-if="list.showMiles" md-column md-numeric md-order-by="miles">Miles</th>
          <th ng-if="list.showDelete" md-column></th>
        </tr>
      </thead>
      <tbody md-body>
        <tr md-row ng-repeat="s in list.list | filter: list.filterList | orderBy: list.query.order" row-href="{{::linkTemplate.replace('%id%', s.event.id)}}" row-href-ext class="clickable">
          <td md-cell style="white-space:nowrap">{{::s.event.stateNumber}}</td>
          <td md-cell style="white-space:nowrap">{{::s.event.start | simpleDate}}</td>
          <td md-cell><strong md-colors="{color:'primary'}">{{::s.event.name}}</strong></td>
          <td ng-if="list.showPersons" md-cell>{{::s.persons}}</td>
          <td md-cell>{{::s.hours.toFixed(2)}}</td>
          <td ng-if="list.showMiles" md-cell>{{::s.miles}}</td>
          <td md-cell ng-if="list.showDelete" class="td-actions-cell" skip-href="yes">
            <md-button ng-if="::s._d" class="md-icon-button md-primary md-warn" aria-label="Delete" ng-click="actions.deleteEvent($event, s)"><md-icon>delete</md-icon></md-button>
          </td>
        </tr>
      </tbody>
      <tfoot>
        <tr md-row>
          <th colspan="3">{{list.yearlyStats[list.showYear].count}} Mission<span ng-if="list.yearlyStats[list.showYear].count != 1">s</span></th>
          <th class="r" ng-if="list.showPersons"></th>
          <th class="r">{{list.yearlyStats[list.showYear].hours.toFixed(2)}}</th>
          <th class="r" ng-if="list.showMiles">{{list.yearlyStats[list.showYear].miles}}</th>
          <th ng-if="list.showDelete">
        </tr>
      </tfoot>
    </table>
  </md-table-container>
  <md-list flex hide-gt-xs>
    <md-list-item class="md-3-line" ng-repeat="s in list.list | filter: list.filterList" ng-href="/missions/roster/{{::s.event.id}}">
      <div class="md-list-item-text">
        <p>{{::s.event.start | simpleDate}} {{::s.event.stateNumber}}</p>
        <h3 md-colors="{color:'primary'}">{{::s.event.name}}</h3>
        <p ng-if="list.showMiles">{{::s.hours.toFixed(2)}} hrs, {{::s.miles}} mi</p>
      </div>
    </md-list-item>
    <md-list-item class="md-2-line">
      <div class="md-list-item-text">
        <p>{{list.yearlyStats[list.showYear].count}} Mission<span ng-if="list.yearlyStats[list.showYear].count != 1">s</span></p>
        <p>{{list.yearlyStats[list.showYear].hours.toFixed(2)}} Hour<span ng-if="list.yearlyStats[list.showYear].hours != 1">s</span></p>
        <p ng-if="list.showMiles">{{list.yearlyStats[list.showYear].miles}} Mile<span ng-if="list.yearlyStats[list.showYear].miles != 1">s</span></p>
      </div>
    </md-list-item>
  </md-list>
</md-card-content>