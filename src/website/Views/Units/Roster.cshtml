@{
  Kcsara.Database.Web.Models.SarUnit u = (Kcsara.Database.Web.Models.SarUnit)ViewData.Model;
  ViewBag.Title = u.Name + " Roster";
}
@section header {
  <h2>@u.Name Roster</h2>
}
<div class="row" ng-controller="UnitRosterCtrl" ng-init="init('@u.Id')">
  <div class="col-md-8 col-xs-12">
    <div class="box box-primary">
      <div class="box-body no-padding">
        <table id="t" class="table table-striped table-condensed">
          <thead>
            <tr><th ng-click="sort('member.name')">Name<span ng-if="roster.sort == 'member.name'"> <i class="fa text-muted" ng-class="{'fa-sort-up': roster.sortDir, 'fa-sort-down': !roster.sortDir}"></i></span></th>
            <th ng-click="sort('member.dem')">DEM #<span ng-if="roster.sort == 'member.dem'"> <i class="fa text-muted" ng-class="{'fa-sort-up': roster.sortDir, 'fa-sort-down': !roster.sortDir}"></i></span></th>
            <th ng-click="sort('status')">Status<span ng-if="roster.sort == 'status'"> <i class="fa text-muted" ng-class="{'fa-sort-up': roster.sortDir, 'fa-sort-down': !roster.sortDir}"></i></span></th>
            <th ng-click="sort('asOf')">Since<span ng-if="roster.sort == 'asOf'"> <i class="fa text-muted" ng-class="{'fa-sort-up': roster.sortDir, 'fa-sort-down': !roster.sortDir}"></i></span></th></tr>
          </thead>
          <tbody class="ng-cloak">
            <tr ng-repeat="r in roster | orderBy:roster.sort:roster.sortDir">
              <td><a ng-href="{{window.appRoot + '/Members/' + r.member.id}}">{{r.member.name}}</a></td>
              <td>{{r.member.dem}}</td>
              <td>{{r.status}}</td>
              <td>{{r.asOf.format('YYYY-MM-DD')}}</td>
            </tr>
          </tbody>
        </table>
        <div ng-if="roster.loading" class="overlay">
          <i class="fa fa-refresh fa-spin"></i>
        </div>
      </div>
    </div>
  </div>
</div>